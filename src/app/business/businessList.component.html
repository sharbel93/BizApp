<div class='panel panel-primary'>
 <div class='panel-heading'>
        {{ pageTitle }}
 </div><!-- panel-heading -->

 <div class='panel-body'>
 <div class="container">
  <div *ngIf="appState == 'edit'" >

  <div class="col-xs-12 col-sm-12 col-md-12">
    <h3>Edit Business</h3>
        <form role="form" (submit)="updateBusiness()">

          <div class="row">

            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">Company
                 <input  class="form-control" type="text" [(ngModel)]="activeCompany" name="company" placeholder="Company Name" #company></label>
              </div>
            </div>

            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label" >Category
                 <select name="category" [(ngModel)]="activeCategory" class="form-control" >
                   <option value="0">Select</option>
                   <option *ngFor="let category of categories" value="{{category.name}}">{{category.name}}</option>
                 </select>
                  </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label>Years In Business
                <input type="text"  [(ngModel)]="activeYearsInBusiness" class="form-control" placeholder="Years In Business" name="years_in_business">
              </label>
              </div>


            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">Phone
                 <input type="number" class="form-control" [(ngModel)]="activePhone" placeholder="Phone" name="phone">
               </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">Street Address
                 <input type="text" class="form-control" [(ngModel)]="activeStreetAddress" placeholder="Street Address" name="street_address">
               </label>
              </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">State
                 <input type="text" class="form-control"  [(ngModel)]="activeState"  placeholder="State" name="state">
               </label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6">

              <div class="form-group">
                <label class="control-label">Email
                 <input type="email" class="form-control" [(ngModel)]="activeEmail" placeholder="Email" name="email">
               </label>
              </div>

            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">City
                 <input type="text" class="form-control"  [(ngModel)]="activeCity" placeholder="City" name="city">
               </label>
              </div>

            </div>
          </div>


          <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6">
              <div class="form-group">
                <label class="control-label">Zipcode
                 <input type="text"  class="form-control" [(ngModel)]="activeZipcode" placeholder="Zipcode" name="zipcode">
               </label>
              </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
              <label>Description
               <textarea [(ngModel)]="activeDescription" name="description"></textarea>
            </label>
            </div>
          </div>


          <div class="row">
            <div class="col-xs-6 col-sm-6 col-md-6">
              <input type="submit" class="btn btn-primary " value="Submit">
            </div>
          </div>

        </form>
      </div>
</div>
</div>


<div *ngIf="appState == 'extend'">
  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-12 ">
      <button class="button alert" (click)="changeState('default')">Go back</button>
    </div>
  </div>
  <div *ngFor="let bus of business">
    <div *ngIf="bus.$key == activeKey">
      <div class="row">
        <div class="col-xs-6 col-sm-6 col-md-6">
          <h3>{{bus.company}}</h3>
          <p>Category: {{bus.category}}</p>
          <p>Years In Business: {{bus.years_in_business}}
          <p>{{bus.description}}</p>
        </div>

        <div class="col-xs-6 col-sm-6 col-md-6">
          <h4>Contact Info</h4>
          <ul>
            <li>Phone: {{bus.phone}}</li>
            <li>Email: {{bus.email}}</li>
            <li>Street: {{bus.street_address}}</li>
            <li>City: {{bus.city}}</li>
            <li>State: {{bus.state}}</li>
            <li>Zipcode: {{bus.zipcode}}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<hr>


  <div class="container-fluid" >
    <div class="row" >
         <div class="col-xs-12 col-sm-6 col-md-12 ">
      <div class="col-xs-6 col-sm-6 col-md-6">
        <button class='btn btn-primary' (click)="gotoDetail()"><span class='glyphicon glyphicon-plus' ></span>Add Business </button>
      </div>

      <div class="col-xs-6 col-sm-6 col-md-6">
          <label>Filter Category
            <select (change)="filterCategory(filteredCategory.value)"  #filteredCategory>
              <option value="0">Select</option>
              <option *ngFor="let cat of categories" value="{{cat.name}}">
                {{cat.name}}
              </option>
            </select>
          </label>
      </div>
</div>
</div>
<!-- <div class='row'>
  <div class='col-md-3'>
   <button class='btn btn-primary'>
     <span class='glyphicon glyphicon-plus' ></span>Add Business </button>
  </div>

  <div class='col-md-3'>Filter Category</div>
  <div class='col-md-3'><select>
    <option>Select</option></select></div>

</div> --> <!--container -->

<div class='table-responsive'>
  <div class="col-xs-12 col-sm-12 col-md-12">
    <div *ngIf="business">
  <table class='table'>
    <thead>
      <tr>
        <th>Company</th>
        <th>Category</th>
        <th>Phone</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bs of business">
         <td>{{bs.company}}</td>
         <td>{{bs.category}}</td>
         <td>{{bs.phone}}</td>
         <td>
           <span class="d-inline-block">
           <button class='btn btn-primary btn-sm' (click)="changeState('extend',bs.$key)" >More</button>
           <button class='btn btn-info btn-sm' (click)="showEdit(bs)">Edit</button>
           <button class='btn btn-danger btn-sm' (click)="gotoDelete(bs)">Delete</button>
           </span>
         </td>
      </tr>
    </tbody>
  </table>
  </div>
  </div>
</div>


 </div><!-- panel-body -->
</div> <!-- panel-primary -->
